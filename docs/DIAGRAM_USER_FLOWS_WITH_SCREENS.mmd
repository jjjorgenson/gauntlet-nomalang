%%{init: {'theme':'base'}}%%

graph TB
    subgraph "Login Screen"
        Login[["┌─────────────────┐<br/>│ 📱 Chat App    │<br/>├─────────────────┤<br/>│ Email:          │<br/>│ [_____________] │<br/>│                 │<br/>│ Password:       │<br/>│ [_____________] │<br/>│                 │<br/>│  [  Login  ]    │<br/>└─────────────────┘"]]
    end

    subgraph "Conversation List Screen"
        ConvList[["┌───────────────────┐<br/>│ Chats      [+]   │<br/>├───────────────────┤<br/>│ 👤 Alice (ES)     │<br/>│ ¿Qué onda? · 2m   │<br/>├───────────────────┤<br/>│ 👤 Bob (JA)       │<br/>│ やばい！ · 5m      │<br/>├───────────────────┤<br/>│ 👥 Family         │<br/>│ Hello! · 1h    (3)│<br/>└───────────────────┘"]]
    end

    subgraph "Chat Screen - Text Message"
        ChatScreen[["┌─────────────────────┐<br/>│ ← Alice (ES)        │<br/>├─────────────────────┤<br/>│ 💡 Today is Día de │<br/>│    los Muertos...   │<br/>├─────────────────────┤<br/>│  ┌────────────┐     │<br/>│  │¿Qué onda?  │     │<br/>│  │What's up?  │ 10:30│<br/>│  └────────────┘ ✓✓  │<br/>│                     │<br/>│     ┌──────────┐    │<br/>│     │Hey Alice!│    │<br/>│ 10:32 ✓✓ └─────────┘│<br/>├─────────────────────┤<br/>│ Alice is typing...  │<br/>├─────────────────────┤<br/>│[____________] ✨ 🎤 │<br/>└─────────────────────┘"]]
    end

    subgraph "Edit Message Flow"
        EditScreen[["┌─────────────────────┐<br/>│ ← Alice             │<br/>├─────────────────────┤<br/>│     ┌──────────┐    │<br/>│ [Long Press]    │    │<br/>│     │Hey Alice!│    │<br/>│     └──────────┘    │<br/>│                     │<br/>│ [✏️ Edit]           │<br/>│ [❌ Cancel]         │<br/>├─────────────────────┤<br/>│ Edit Mode:          │<br/>│ [Hey Alice! How]    │<br/>│ [are you?___]  ✓    │<br/>└─────────────────────┘"]]
    end

    subgraph "Voice Message Flow"
        VoiceScreen[["┌─────────────────────┐<br/>│ ← Bob               │<br/>├─────────────────────┤<br/>│  ┌──────────────┐   │<br/>│  │ 🔊 0:45      │   │<br/>│  │ ▶️ [████░░░] │   │<br/>│  │              │   │<br/>│  │ やばい！     │   │<br/>│  │ Awesome!     │   │<br/>│  └──────────────┘ ✓ │<br/>├─────────────────────┤<br/>│ [Press & Hold 🎤]   │<br/>│ [to Record]         │<br/>└─────────────────────┘"]]
    end

    subgraph "Slang Explanation Modal"
        SlangModal[["┌─────────────────────┐<br/>│ Slang Explanation   │<br/>├─────────────────────┤<br/>│ Term: '¿Qué onda?'  │<br/>│                     │<br/>│ Meaning:            │<br/>│ 'What's up?' or     │<br/>│ 'How's it going?'   │<br/>│                     │<br/>│ Context:            │<br/>│ Casual Mexican      │<br/>│ Spanish greeting    │<br/>│                     │<br/>│     [  Close  ]     │<br/>└─────────────────────┘"]]
    end

    subgraph "Formality Picker Modal"
        FormalityModal[["┌─────────────────────┐<br/>│ Adjust Formality ✨ │<br/>├─────────────────────┤<br/>│ Original:           │<br/>│ 'Hey, can u send'   │<br/>│ 'that?'             │<br/>├─────────────────────┤<br/>│ [  Casual  ]        │<br/>│ Hey! Can you send   │<br/>│ that over?          │<br/>├─────────────────────┤<br/>│ [  Neutral  ]       │<br/>│ Hello, could you    │<br/>│ please send that?   │<br/>├─────────────────────┤<br/>│ [  Formal  ]        │<br/>│ Good afternoon...   │<br/>└─────────────────────┘"]]
    end

    subgraph "Settings Screen"
        Settings[["┌─────────────────────┐<br/>│ ← Settings          │<br/>├─────────────────────┤<br/>│ Profile             │<br/>│ Alice Smith  [Edit] │<br/>│ alice@email.com     │<br/>├─────────────────────┤<br/>│ Preferences         │<br/>│ Language:   English │<br/>│ Theme:      Dark ☾  │<br/>│ Timezone:   PST     │<br/>├─────────────────────┤<br/>│ [  Logout  ]        │<br/>└─────────────────────┘"]]
    end

    %% Flow connections
    Login -->|Login Success| ConvList
    ConvList -->|Select Conversation| ChatScreen
    ChatScreen -->|Type & Send| ChatScreen
    ChatScreen -->|Long Press Message| EditScreen
    EditScreen -->|Submit Edit| ChatScreen
    ChatScreen -->|Record Voice| VoiceScreen
    VoiceScreen -->|Send| ChatScreen
    ChatScreen -->|Tap 'What does this mean?'| SlangModal
    SlangModal -->|Close| ChatScreen
    ChatScreen -->|Tap Magic Wand ✨| FormalityModal
    FormalityModal -->|Select| ChatScreen
    ConvList -->|Tap Settings| Settings
    Settings -->|Back| ConvList

    %% Styling
    classDef screenBox fill:#e3f2fd,stroke:#1976d2,stroke-width:2px
    class Login,ConvList,ChatScreen,EditScreen,VoiceScreen,SlangModal,FormalityModal,Settings screenBox
